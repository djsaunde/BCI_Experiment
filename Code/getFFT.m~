function [x, y, f] = getFFT(inlet, x)
% updates value of windowed EEG sample from LSL

% pull sample from from LSL inlet at rate of 250Hz
[chunk, ~] = inlet.pull_chunk();

% if we have fewer than 250 samples
if size(x, 1) < 250 % add the current sample to the window
    x = x(1:size(x, 1)-size(chunk, 1), :);
    x = [x; chunk'];
    y = abs(fft(zeros(250, 8)));
    y = y(1:250/2+1,:);
    y(2:end-1) = 2*y(2:end-1);
else % otherwise, remove the oldest samples and add the newest, and compute the FFT
    x(1:size(chunk, 1),:) = [];
    x = [x; chunk'];
    x = x(1:250,:);
    % w = hamming(8)*hamming(250)';
    % y = x*w;
    y = abs(fft(x)/250);
    y = y(1:250/2+1,:);
    y(2:end-1) = 2*y(2:end-1);
end

f = (1/250)*(0:(250/2))/250;